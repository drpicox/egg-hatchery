!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).EggHatchery=t()}(this,(function(){"use strict";var e=Object.defineProperty,t=function(t){var r=t.tool,n=Object.create(null),o=Object.freeze(Object.create(n)),i=Object.create(null);r("breed",(function(r,o){!function(){if(t.isHatched)throw new Error("breed a hatching breed fails when hatch is finished")}(),function(e){if(!e||"string"!=typeof e)throw new Error('invalid breed name, expected the first argument to be a non-empty string but received "'+e+'"')}(r),function(e){if("function"!=typeof e)throw new Error('invalid breed function, expected the second argument to be a function but received "'+e+'"')}(o);var c=i[r],a=Object.create(n);e(a,r,{get:c}),Object.freeze(a);var f,d=!1,u=!1,s=function(){if(!t.isHatched)throw new Error("breeds object cannot be used until eggs hatch");if(d)return f;if(u)throw new Error('breed cycle detected, it uses breeds that uses "'+r+'"');return u=!0,f=o(a),d=!0,f};i[r]=s,e(n,r,{get:s,configurable:!0})})),r("breeds",o)};function r(){var e=Object.create(null);return e.tool=function(t,r){if(!t||"string"!=typeof t)throw new Error('invalid tool name, expected the first argument to be a non-empty string but received "'+t+'"');if(e.isHatched)throw new Error("invalid state exception, cannot define more tools once the egg is hatched");e[t]=r},e.isHatched=!1,Object.freeze(Object.create(e))}function n(){var e=new Set;function t(r){for(var n=0;n<r.length;n++)Array.isArray(r[n])?t(r[n]):e.add(r[n])}for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t(n),[].concat(e)}function o(e){for(var t=0;t<e.length;t++)if("function"!=typeof e[t])throw new Error('received egg is not an egg, expected a function but received "'+e[t]+'"')}function i(e,t){for(var r=0;r<e.length;r++)e[r](t)}return function(){for(var e=r(),c=arguments.length,a=new Array(c),f=0;f<c;f++)a[f]=arguments[f];var d=n(t,a);o(d),i(d,e);var u=e.breeds;return e.tool("isHatched",!0),u}}));
//# sourceMappingURL=egg-hatchery.umd.min.js.map
